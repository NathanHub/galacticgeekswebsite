<!DOCTYPE html>


<!-- Hey there curious monkey ;)
Copyright 2016 by Hugo Peters -->

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:fb="http://ogp.me/ns/fb#"
      lang="en">

<!-- Mirrored from hugo.fyi/projects/bolt-storm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Aug 2021 04:17:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
	 <meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1,user_scalable=0'>
	<meta name="author" content="Hugo Peters">
	<meta name="mobile-web-app-capable" content="yes">

	<!-- BEGIN SEOmatic rendered SEO Meta -->

<title>Bolt Storm | Hugo Peters - Game Programming &amp; Design Portfolio</title>

<!-- Standard SEO -->

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="referrer" content="always" />
<meta name="robots" content="all" />
<meta name="keywords" content="Bolt Storm, game programming, hugo peters, c++, c#, portfolio" />
<meta name="description" content="A 3D dungeon crawler / shoot 'em up, for which I made state machines, custom collision checking, weapon systems, and more, in Unreal Engine 4" />
<meta name="generator" content="SEOmatic" />
<link rel="canonical" href="bolt-storm.html" />

<!-- Dublin Core basic info -->

<meta name="dcterms.Identifier" content="bolt-storm.html" />
<meta name="dcterms.Format" content="text/html" />
<meta name="dcterms.Relation" content="Hugo Peters - Game Programming &amp; Design Portfolio" />
<meta name="dcterms.Language" content="en" />
<meta name="dcterms.Publisher" content="Hugo Peters - Game Programming &amp; Design Portfolio" />
<meta name="dcterms.Type" content="text/html" />
<meta name="dcterms.Coverage" content="../index.html" />
<meta name="dcterms.Rights" content="Copyright &copy;2021 Hugo Peters." />
<meta name="dcterms.Title" content="Bolt Storm" />
<meta name="dcterms.Subject" content="Bolt Storm, game programming, hugo peters, c++, c#, portfolio" />
<meta name="dcterms.Contributor" content="Hugo Peters - Game Programming &amp; Design Portfolio" />
<meta name="dcterms.Date" content="2021-08-19" />
<meta name="dcterms.Description" content="A 3D dungeon crawler / shoot 'em up, for which I made state machines, custom collision checking, weapon systems, and more, in Unreal Engine 4" />

<!-- Facebook OpenGraph -->

<meta property="og:type" content="website" />
<meta property="og:locale" content="en_us" />
<meta property="og:url" content="bolt-storm.html" />
<meta property="og:title" content="Bolt Storm | Hugo Peters - Game Programming &amp; Design Portfolio" />
<meta property="og:description" content="A 3D dungeon crawler / shoot 'em up, for which I made state machines, custom collision checking, weapon systems, and more, in Unreal Engine 4" />
<meta property="og:image" content="../assets/SiteMetaBg.jpg" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="512" />
<meta property="og:image:height" content="276" />
<meta property="og:site_name" content="Hugo Peters - Game Programming &amp; Design Portfolio" />
<meta property="og:see_also" content="https://twitter.com/HugoPeters96" />
<meta property="og:see_also" content="https://www.linkedin.com/in/hugo-peters-8a695184" />

<!-- Twitter Card -->

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@HugoPeters96" />
<meta name="twitter:title" content="Bolt Storm | Hugo Peters - Game Programming &amp; Design Portfolio" />
<meta name="twitter:description" content="A 3D dungeon crawler / shoot 'em up, for which I made state machines, custom collision checking, weapon systems, and more, in Unreal Engine 4" />
<meta name="twitter:image" content="../assets/SiteMetaBg.jpg" />


<!-- Humans.txt authorship http://humanstxt.org -->

<link type="text/plain" rel="author" href="../humans.txt" />

<!-- Domain verification -->


<!-- Identity -->

<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "name": "Hugo Peters",
    "url": "http://hugo.fyi/",
    "sameAs": ["https://twitter.com/HugoPeters96","https://www.linkedin.com/in/hugo-peters-8a695184"],
    "gender": "Male" 
}
</script>

<!-- WebSite -->

<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Hugo Peters - Game Programming &amp; Design Portfolio",
    "description": "Game programming, development &amp; design portfolio of Hugo Peters.  Junior Game Programmer at Ubisoft.",
    "url": "http://hugo.fyi/",
    "image": "http://hugo.fyi/assets/SiteMetaBg.jpg",
    "sameAs": ["https://twitter.com/HugoPeters96","https://www.linkedin.com/in/hugo-peters-8a695184"],
    "copyrightHolder": {
        "@type": "Person",
        "name": "Hugo Peters",
        "url": "http://hugo.fyi/",
        "sameAs": ["https://twitter.com/HugoPeters96","https://www.linkedin.com/in/hugo-peters-8a695184"],
        "gender": "Male" 
    },
    "author": {
        "@type": "Person",
        "name": "Hugo Peters",
        "url": "http://hugo.fyi/",
        "sameAs": ["https://twitter.com/HugoPeters96","https://www.linkedin.com/in/hugo-peters-8a695184"],
        "gender": "Male" 
    },
    "creator": {
        "@type": "Organization" 
    } 
}
</script>

<!-- Place -->



<!-- Main Entity of Page -->

<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "name": "Bolt Storm",
    "description": "A 3D dungeon crawler / shoot 'em up, for which I made state machines, custom collision checking, weapon systems, and more, in Unreal Engine 4",
    "image": {
        "@type": "ImageObject",
        "url": "http://hugo.fyi/assets/SiteMetaBg.jpg",
        "width": "512",
        "height": "276" 
    },
    "url": "http://hugo.fyi/projects/bolt-storm",
    "mainEntityOfPage": "http://hugo.fyi/projects/bolt-storm",
    "breadcrumb": {
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": "1",
                "item": {
                    "@id": "http://hugo.fyi/",
                    "name": "Welcome to Hugo.fyi!" 
                } 
            },
            {
                "@type": "ListItem",
                "position": "2",
                "item": {
                    "@id": "http://hugo.fyi/projects/bolt-storm",
                    "name": "Bolt Storm" 
                } 
            }
        ] 
    } 
}
</script>

<!-- Breadcrumbs -->

<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
        {
            "@type": "ListItem",
            "position": "1",
            "item": {
                "@id": "http://hugo.fyi/",
                "name": "Welcome to Hugo.fyi!" 
            } 
        },
        {
            "@type": "ListItem",
            "position": "2",
            "item": {
                "@id": "http://hugo.fyi/projects/bolt-storm",
                "name": "Bolt Storm" 
            } 
        }
    ] 
}
</script>

<!-- Google Tag Manager -->


<!-- Google Analytics -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89570321-1', 'auto', {allowLinker: true});
  ga('require', 'displayfeatures');
  ga('require', 'linkid');
  ga('require', 'linker');
  ga('send', 'pageview');
</script>
<!-- END SEOmatic rendered SEO Meta -->
	
	<title>Hugo Peters - Game Programming &amp; Design Portfolio</title>
	
	<!-- Import stylesheets -->
														
	<!-- Import fonts -->
	<link href="https://fonts.googleapis.com/css?family=Arvo" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Abel" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">

	<!-- Global script -->
	<script type="text/javascript">
		var _siteUrl = "../index.html";
		var _livePreview = false;

			</script>
	
	<!-- Import scripts -->
																
	<script src="../../cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

	<!-- Begin Smartlook -->
	<script type="text/javascript">
	    window.smartlook||(function(d) {
	    var o=smartlook=function(){ o.api.push(arguments)},h=d.getElementsByTagName('head')[0];
	    var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript';
	    c.charset='utf-8';c.src='../../rec.smartlook.com/recorder.js';h.appendChild(c);
	    })(document);
	    smartlook('init', 'aef82bd583b6b9fdad3e293e43a38f7c89a3ba4c');
	</script>
	<!-- End Smartlook -->

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
  <link rel="stylesheet" type="text/css" href="../css/bootstrap.css"/>
<link rel="stylesheet" type="text/css" href="../css/BootstrapXL.css"/>
<link rel="stylesheet" type="text/css" href="../css/spinner.css"/>
<link rel="stylesheet" type="text/css" href="../css/font-awesome.min.css"/>
<link rel="stylesheet" type="text/css" href="../css/jquery.fullpage.min.css"/>
<link rel="stylesheet" type="text/css" href="../css/hamburgers.css"/>
<link rel="stylesheet" type="text/css" href="../css/flickity.min.css"/>
<link rel="stylesheet" type="text/css" href="../css/lity.min.css"/>
<link rel="stylesheet" type="text/css" href="../css/tomorrow-night.min.css"/>
<link rel="stylesheet" type="text/css" href="../css/photoswipe.css"/>
<link rel="stylesheet" type="text/css" href="../css/photoswipe-default-skin/default-skin.css"/>
<link rel="stylesheet" type="text/css" href="../css/plyr.css"/>
<link rel="stylesheet" type="text/css" href="../less/common2.css"/></head>
  <body>
  	<div id="page-container">
  		<div id="background-frame">
  						<div id="background-slider"></div>

		<script type="text/javascript">
		/* Cache urls for background images so we can use them later for the slideshow :D */
		var inUrls = [{"url":"http:\/\/hugo.fyi\/assets\/projects\/bolt-storm\/bg\/Poster-4k-Landscape-wLogo-Alt.jpg"},{"url":"http:\/\/hugo.fyi\/assets\/projects\/bolt-storm\/bg\/AttackingFromAfar01_16x9.jpg"},{"url":"http:\/\/hugo.fyi\/assets\/projects\/bolt-storm\/bg\/FightingForHighGround01_16x9.jpg"},{"url":"http:\/\/hugo.fyi\/assets\/projects\/bolt-storm\/bg\/FlankingBarricades01_16x9.jpg"},{"url":"http:\/\/hugo.fyi\/assets\/projects\/bolt-storm\/bg\/ShotAtWithBolts01_16x9.jpg"}];
		var cachedBackgroundSlideshow = new Array();

		for (var i = 0; i < inUrls.length; i++)
		{
			cachedBackgroundSlideshow.push(inUrls[i].url);
		}
		</script>
	  		</div>

		<!-- PRELOADER -->
		<div id="preloader-frame">
			<div id="preloader-loader">
				<div class="spinner"></div>
			</div>
		</div>
		<!-- End of PRELOADER -->

		<div id="page">
							<div id="pp-container">
	<!-- <div class="pp-bg"></div> -->
	<div class="container pp-contents-container">
		<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-12"">
				<!-- PROJECT TITLE -->
				<div class="pp-title-container">
					<div class="pp-title">
						<span>Bolt Storm</span>
					</div>
				</div>
				<!-- End of PROJECT TITLE -->

				<!-- PROJECT FACTS -->
				
				<div class="pp-facts-container">
					<table style="margin: auto;">
																																		<tr>
							    	<td class="pp-facts-cell"><strong>Project Type</strong></td>
							    	<td class="pp-facts-cell">University / group project</td>
						    	</tr>
					    																																			<tr>
							    	<td class="pp-facts-cell"><strong>Software Used</strong></td>
							    	<td class="pp-facts-cell">Unreal Engine 4</td>
						    	</tr>
					    																						<tr>
							    	<td class="pp-facts-cell"><strong>Languages Used</strong></td>
							    	<td class="pp-facts-cell">C++, Blueprints, C#</td>
						    	</tr>
					    																						<tr>
							    	<td class="pp-facts-cell"><strong>Primary Role(s)</strong></td>
							    	<td class="pp-facts-cell">Gameplay programming</td>
						    	</tr>
					    												</table>
				</div>
				<!-- End of PROJECT FACTS -->

				<!-- PROJECT DESCRIPTION -->
				<div class="pp-contents">

						    	    	<p><a href="http://www.indiedb.com/games/bolt-storm" target="_blank" rel="noreferrer noopener"><img src="../../button.indiedb.com/popularity/medium/games/57407.png" alt="57407.png" title="57407.png" /></a><br /></p>

<p><p>Bolt Storm is the project I'm currently part of as Gameplay Programmer, during my 3rd year at <a href="https://www.nhtv.nl/ENG/bachelors/creative-media-and-game-technologies/startpage.html" target="_blank" rel="noreferrer noopener">NHTV University</a>. The project has around 25 team members, 12 of which are programmers. I joined the project when it transitioned from pre-production to production.</p></p>

	    	    	        		    	    		    	    	        		    	    	    	<div class="videoWrapper">
	    		<iframe src="https://www.youtube.com/embed/uW6aKNBEA5M" frameborder="0" allowfullscreen></iframe>
	    	</div>
	    	

															<div class="accordion">
							<i class="fa fa-info" aria-hidden="true"></i>
							<span style="margin-left: 5px;">Finite State Machine (for character logic)</span>
							<div class="accordion-icon">
								<i class="fa fa-times" aria-hidden="true"></i>
							</div>
						</div>
						<div class="accordion-inner">
                 	
                 			    	    	<p>I developed a finite state machine which can be applied to any character (player, co-op players, AI) to support the rewrite of character logic at the start of the production phase. The state machine is quite simplistic, it features an ordered list of states, with the first few slots reserved for 'primary' states (walking, strafing, etc. - states which affect the lower body of the player) and 'secondary' states (shooting, aiming, etc. - states which affect the upper body). The state machine is written in C++, but is entirely accessible from Blueprints.</p>

	    	    	        		    	    	

                    											<div class="accordion">
							<i class="fa fa-code" aria-hidden="true"></i>
							<span style="margin-left: 5px;">CODE SNIPPET - State Machine</span>
							<div class="accordion-icon">
								<i class="fa fa-times" aria-hidden="true"></i>
							</div>
						</div>
						<div class="accordion-inner">
                 	
                 			    	    	<p>The following code demonstrates a header for a logic state within the state machine:</p>

	    	    	        		    	    		    	    	    		    		<pre class="prettyprint linenums">/**
 * Character logic state for walking
 */
UCLASS()
class BOLTSTORM_API UBsStateWalk : public UBsCharacterStateBase
{
	GENERATED_BODY()

public: // ctor / dtor

	UBsStateWalk();
	~UBsStateWalk();

protected: // implementation

	virtual void OnInitialize() override;

	virtual void OnActivate() override;

	virtual void OnDeactivate() override;

	virtual void Tick(float DeltaTime) override;

	virtual void HandleInputAxis(float aLS_X, float aLS_Y, float aRS_X, float aRS_Y) override;
};</pre>
	    		    	        		    	    		    	    	<p>The following code is part of the header of the state machine itself:</p>

	    	    	        		    	    		    	    	    		    		<pre class="prettyprint linenums">UCLASS(Blueprintable)
class BOLTSTORM_API UBsStateMachine : public UObject
{
	friend class ABsCharacterPlayerBase;

	GENERATED_BODY()

public: // ctor / dtor

	UBsStateMachine();
	~UBsStateMachine();

public: // functions

	/*****************************************************************************
	* General
	*****************************************************************************/

	/* Adds the state to the list of registered states (mRegisteredStatesArray) */
	UFUNCTION(BlueprintCallable, Category = "BS: State Manager")
		bool RegisterState(UBsStateBase* aState);

	/* 
	 * Removes the state from the list of registered states (mRegisteredStatesArray)
	 * and eventually deactivates it, if the state is still active.
	 */
	UFUNCTION(BlueprintCallable, Category = "BS: State Manager")
		bool UnregisterState(UBsStateBase* aState);

	/* Returns the state with the given EStateId */
	UFUNCTION(BlueprintPure, Category = "BS: State Manager")
		UBsStateBase* GetState(EStateId aStateId);

	UFUNCTION(BlueprintPure, Category = "BS: State Manager")
		int32 GetNumActiveStates();

	UFUNCTION(BlueprintPure, Category = "BS: State Manager")
		bool IsStateActive(EStateId aStateId);

	/*****************************************************************************
	******************************************************************************
	** IMPORTANT NOTE !!
	** The following Set and Unset functions DO NOT actually modify mActiveStatesArray.
	** They ONLY set a set / unset flag within the state, which are checked the next frame.
	** Only then are the actual Set/Unset functions called (SetStateNow, UnsetStateNow)
	** The 'Now' functions are exposed to C++ users, but not to Blueprints.
	******************************************************************************
	*****************************************************************************/

	/*
	 * Sets the state with aStateId as active.
	 * In case that it is a 'normal' state (primary or secondary), the previous
	 * state contained in the slot is automatically deactivated.
	 * In case of a 'special' state, it is added to the bottom of the list.
	 * Use UnsetState() to deactivate any state, including special states.
	 */
	UFUNCTION(BlueprintCallable, Category = "BS: State Manager")
		bool SetState(EStateId aStateId);

	/* Same as SetState, but fails silently if the state doesn't exist*/
	UFUNCTION(BlueprintCallable, Category = "BS: State Manager")
		bool TrySetState(EStateId aStateId);

	/* Only use SetStateNow if you know what you're doing! Recommended to use SetState instead. */
	bool SetStateNow(EStateId aStateId);

	/* Same as SetState but takes an instance of BsStateBase instead */
	UFUNCTION(BlueprintCallable, Category = "BS: State Manager")
		bool SetStateByInstance(UBsStateBase* aState);

	/* Only use SetStateByInstanceNow if you know what you're doing! Recommended to use SetStateByInstanceNow instead. */
	bool SetStateByInstanceNow(UBsStateBase* aState);

	/*
	 * Deactivates the state with aStateId.
	 * In case that it is a 'normal' state (primary or secondary), the slot
	 * is set to nullptr. In case of a 'special* state it is simply removed
	 * from the list.
	 */
	UFUNCTION(BlueprintCallable, Category = "BS: State Manager")
		bool UnsetState(EStateId aStateId)
;
	/* Same as UnsetState, but fails silently if the state doesn't exist*/
	UFUNCTION(BlueprintCallable, Category = "BS: State Manager")
		bool TryUnsetState(EStateId aStateId);

	/* Only use UnsetStateNow if you know what you're doing! Recommended to use UnsetStateNow instead. */
	bool UnsetStateNow(EStateId aStateId);

	/* Same as UnsetState but takes an instance of BsStateBase instead */
	UFUNCTION(BlueprintCallable, Category = "BS: State Manager")
		bool UnsetStateByInstance(UBsStateBase* aState);

	/* Only use UnsetStateByInstanceNow if you know what you're doing! Recommended to use UnsetStateByInstanceNow instead. */
	bool UnsetStateByInstanceNow(UBsStateBase* aState);

	/* Returns the active primary state in this state machine */
	UFUNCTION(BlueprintPure, Category = "BS: State Manager")
		UBsStateBase* GetPrimaryState();

	/* Returns the active secondary state in this state machine */
	UFUNCTION(BlueprintPure, Category = "BS: State Manager")
		UBsStateBase* GetSecondaryState();

	/* Returns the active special states in this state machine */
	UFUNCTION(BlueprintPure, Category = "BS: State Manager")
		TArray<UBsStateBase*> GetSpecialStates();

	/* Returns the first state found with the given type */
	UFUNCTION(BlueprintPure, Category = "BS: State Manager")
		UBsStateBase* GetStateByType(EStateType aType, bool aActiveOnly);

	/* Returns a list of states found with the given type */
	UFUNCTION(BlueprintPure, Category = "BS: State Manager")
		TArray<UBsStateBase*> GetStatesByType(EStateType aType, bool aActiveOnly);

...</pre>
	    		    	        		    	    	

                    
                    		            	</div>	
		            															<div class="accordion">
							<i class="fa fa-map-o" aria-hidden="true"></i>
							<span style="margin-left: 5px;">BLUEPRINTS SNIPPET - State Machine</span>
							<div class="accordion-icon">
								<i class="fa fa-times" aria-hidden="true"></i>
							</div>
						</div>
						<div class="accordion-inner">
                 	
                 			    	    	<p><img src="../assets/statemachine1.png" alt="statemachine1.png#asset:36" style="font-style:normal;font-weight:normal;font-size:15px;font-family:Arial, 'Helvetica Neue', Helvetica, Tahoma, sans-serif;vertical-align:middle;height:auto;background-color:rgb(255,255,255);" /><img src="../assets/statemachine2.png" alt="statemachine2.png#asset:37" style="font-style:normal;font-weight:normal;font-size:15px;font-family:Arial, 'Helvetica Neue', Helvetica, Tahoma, sans-serif;vertical-align:middle;height:auto;background-color:rgb(255,255,255);" /><img src="../assets/statemachine3.png" alt="statemachine3.png#asset:38" style="font-style:normal;font-weight:normal;font-size:15px;font-family:Arial, 'Helvetica Neue', Helvetica, Tahoma, sans-serif;vertical-align:middle;height:auto;background-color:rgb(255,255,255);" /></p>

	    	    	        		    	    	

                    
                    		            	</div>	
		            				
                    		            	</div>	
		            															<div class="accordion">
							<i class="fa fa-shield" aria-hidden="true"></i>
							<span style="margin-left: 5px;">Combat System (melee, ranged, shielded)</span>
							<div class="accordion-icon">
								<i class="fa fa-times" aria-hidden="true"></i>
							</div>
						</div>
						<div class="accordion-inner">
                 	
                 			    	    	<p>Bolt Storm features both ranged (gun, crossbow) and melee (sword, knife) combat. To allow for these different types of weapons, I set up a system which can map bones ('sockets') of characters to a specific slot, so that weapons can be used on different skeletons. The slot definitions, weapons themselves, and even the local binding have local offsets, to fine-tune the position in every case.</p>

	    	    	        		    	    		    	    	        		    	    <div style="text-align: left; margin-bottom: 10px;">
	    	 <video autoplay muted loop style="	max-width: 100%; max-height: 100%;">
		  		<source src="../assets/projects/378/BoltStorm-Combat1.mp4" type="video/mp4" />
			</video>
	    </div>
	    	    		    	    	        		    	    <div style="text-align: left; margin-bottom: 10px;">
	    	 <video autoplay muted loop style="	max-width: 100%; max-height: 100%;">
		  		<source src="../assets/projects/379/bs-combat-3.mp4" type="video/mp4" />
			</video>
	    </div>
	    	    		    	    	<h2>Custom 'melee' collision checking</h2>

<p><p>Swords swing pretty fast, meaning the default collision checking wasn't optimal in our case. We also wanted collision checking 'LODs', in other words; being able to have less precise collision checking in cases where precision doesn't really matter.
</p>
<p>In the case of Bolt Storm, there can be armies of knights fighting, so collision hits can be guessed, instead of checked very precisely.
For 1-on-1 combat, I implemented collision checking by having a set of boxes on the weapon which define what is collidable, then each frame the previous position of each box is traced against the current position of that box.</p>
<p>Visually, that looks like this:</p>
<p><img src="../../i.imgur.com/TY8eHYA.gif" alt="TY8eHYA.gif" style="vertical-align:middle;height:auto;" /></p></p>

	    	    	        		    	    	

                    											<div class="accordion">
							<i class="fa fa-code" aria-hidden="true"></i>
							<span style="margin-left: 5px;">CODE SNIPPET - Melee collision checking</span>
							<div class="accordion-icon">
								<i class="fa fa-times" aria-hidden="true"></i>
							</div>
						</div>
						<div class="accordion-inner">
                 	
                 			    	    	    		    		<pre class="prettyprint linenums">TArray&lt;FHitResult&gt; FBsWpCollisionPreciseBox::UpdateCollision(AActor* aActor)
{
	UWorld* tWorld = aActor->GetWorld();

	TArray&lt;FHitResult&gt; tOutResult;

	for (int i = 0; i < mCachedComps.Num(); i++)
	{
		const UBoxComponent* tComp = mCachedComps[i];

		FTransform& tPrevTransform = mCachedTransforms[i];
		FTransform tCurTransform = tComp->GetComponentToWorld();

		FVector BoxExt = tComp->GetScaledBoxExtent();

		TArray&lt;FHitResult&gt; tThisOutResult;
		FCollisionQueryParams tQueryParams = FCollisionQueryParams::DefaultQueryParam;
		FCollisionResponseParams tResponseParams = FCollisionResponseParams::DefaultResponseParam;
		FCollisionObjectQueryParams tObjectQueryParams = FCollisionObjectQueryParams::AllObjects;

		/* Add the weapon */
		tQueryParams.AddIgnoredActor(tComp->GetOwner());
		/* Add the weapon's owner (character) */
		tQueryParams.AddIgnoredActor(tComp->GetOwner()->GetOwner());

		if (tWorld->SweepMultiByObjectType(tThisOutResult,
			tPrevTransform.GetTranslation(), tCurTransform.GetTranslation(), tPrevTransform.GetRotation(),
			tObjectQueryParams, FCollisionShape::MakeBox(BoxExt / 2.f), tQueryParams))
		{
			tOutResult.Append(tThisOutResult);
		}

		mCachedTransforms[i] = tCurTransform;
	}

	return tOutResult;
}</pre>
	    		    	        		    	    	

                    
                    		            	</div>	
		            									
                 			    	    	<h2>State Machine &amp; Combat System in action</h2>

<p><p>The following demonstrates the character logic and the combat system in action, notice how the character rotation locks while he swings the sword, and waits until the attack is over before rotating back.</p></p>

	    	    	        		    	    		    	    	        		    	    <div style="text-align: left; margin-bottom: 10px;">
	    	 <video autoplay muted loop style="	max-width: 100%; max-height: 100%;">
		  		<source src="../assets/projects/395/boltstorm_1_ffmpeg2.mp4" type="video/mp4" />
			</video>
	    </div>
	    	    	

                    
                    				
                    		            	</div>	
		            															<div class="accordion">
							<i class="fa fa-cubes" aria-hidden="true"></i>
							<span style="margin-left: 5px;">Ranged Combat &amp; Projectile Batching</span>
							<div class="accordion-icon">
								<i class="fa fa-times" aria-hidden="true"></i>
							</div>
						</div>
						<div class="accordion-inner">
                 	
                 			    	    	<p>I implemented a system that allows us to have many (<em>many</em>) projectiles on the screen at the same time. It works like this</p>

<p><ul><li>When a projectile is fired, submit the data to a global actor which manages them</li><li>In the actor, check if an Instanced Static Mesh Component (ISM component) exists for the mesh of the projectile<ul><li> If not, create two new components:<ul><li>One will be used for while the projectile is moving, constantly updating the mesh from the CPU</li><li>The other will be used exclusively for static projectiles (laying still on the ground)</li></ul></li></ul></li><li>Create a physics body for the projectile (derived of Primitive Component, not an actor), but do not use it for now, just keep setting the velocity from the next step:</li><li>Initialize custom physics code (used to calculate projectile arcs for AI)</li><li>Submit an instance to the "moving" ISM component</li><li>&lt; update the projectile &amp; custom physics &gt;</li><li>When it touches an object, the physics body is put to use, from now on the projectile won't cause a "hit" if it touches a character</li><li>The physics body causes the projectile to fall down / slide in a natural way</li><li>When the projectile has come to a stop, its physics body is destroyed, and the instance is moved from the "moving" ISM component to the "static" ISM component</li><li>After a while it's also removed from this component, completely destroying the projectile</li></ul><p>This approach has allowed us to have as many as 27,000 moving projectiles on the screen simulatenously, and over 230,000 static projectiles. With actors, this number was far below 1,000 (test situation: a pretty much empty scene in UE4 on a desktop with a GTX 770, i7 4770k)</p></p>

	    	    	        		    	    		    	    	        		    	    <div style="text-align: left; margin-bottom: 10px;">
	    	 <video autoplay muted loop style="	max-width: 100%; max-height: 100%;">
		  		<source src="../assets/projects/388/boltstorm_2_ffmpeg2.mp4" type="video/mp4" />
			</video>
	    </div>
	    	    		    	    	<p>Projectiles can be spawned in "bursts", each burst can have a root offset, and a local offset per projectile, allowing for shapes of projectiles:</p>

<p><p><img src="../../i.imgur.com/jpv0zxN.gif" alt="jpv0zxN.gif" style="vertical-align:middle;height:auto;" /></p>
<p><img src="../../i.imgur.com/2R6iG4t.gif" alt="2R6iG4t.gif" style="vertical-align:middle;height:auto;" /></p></p>

	    	    	        		    	    	

                    
                    		            	</div>	
		            															<div class="accordion">
							<i class="fa fa-sort-amount-asc" aria-hidden="true"></i>
							<span style="margin-left: 5px;">​Aim-assist with prioritization sorting</span>
							<div class="accordion-icon">
								<i class="fa fa-times" aria-hidden="true"></i>
							</div>
						</div>
						<div class="accordion-inner">
                 	
                 			    	    	<p>For both controller and mouse/keyboard controls I implemented a system that auto-aims to objects based on a variety of factors (fixed per-object priority, angle to weapon, distance, etc.). <br /></p>

<p><p>This system is tweak-able by designers using a curve that determines the maximum angle based on the distance between the object and the weapon:</p></p>

	    	    	        		    	    		    	    	        		    	    <div style="text-align: left; margin-bottom: 10px;">
	    	 <video autoplay muted loop style="	max-width: 100%; max-height: 100%;">
		  		<source src="../assets/projects/399/BS-AimAssist2.mp4" type="video/mp4" />
			</video>
	    </div>
	    	    	

                    
                    		            	</div>	
		            															<div class="accordion">
							<i class="fa fa-desktop" aria-hidden="true"></i>
							<span style="margin-left: 5px;">User Interface implementation</span>
							<div class="accordion-icon">
								<i class="fa fa-times" aria-hidden="true"></i>
							</div>
						</div>
						<div class="accordion-inner">
                 	
                 			    	    	<p>I designed and developed some UI elements for Bolt Storm, for example, a widget that slides open to reveal information about an item that you can buy (swords, crossbows, etc). It compares your currently-equipped item with the one you're able to buy.</p>

	    	    	        		    	    		    	    	        		    	    <div style="text-align: left; margin-bottom: 10px;">
	    	 <video autoplay muted loop style="	max-width: 100%; max-height: 100%;">
		  		<source src="../assets/projects/404/BS-Shop-UI.mp4" type="video/mp4" />
			</video>
	    </div>
	    	    		    	    	<p>Furthermore I re-used this design to make a small "context popup" which informs the user about necessary information during gameplay, like a message that tells the player to defeat more enemies before being able to exit the level:</p>

	    	    	        		    	    		    	    	        		    	    <div style="text-align: left; margin-bottom: 10px;">
	    	 <video autoplay muted loop style="	max-width: 100%; max-height: 100%;">
		  		<source src="../assets/projects/406/ContextFeedback.mp4" type="video/mp4" />
			</video>
	    </div>
	    	    	

                    
                    		            	</div>	
		            															<div class="accordion">
							<i class="fa fa-paint-brush" aria-hidden="true"></i>
							<span style="margin-left: 5px;">Formation Selection Shader</span>
							<div class="accordion-icon">
								<i class="fa fa-times" aria-hidden="true"></i>
							</div>
						</div>
						<div class="accordion-inner">
                 	
                 			    	    	<p>In Bolt Storm you can command your army to attack a certain group of enemies. I wrote a shader consisting of two passes (a pre-tonemap and post-tonemap pass) to visualize the selection. <em>Note: this is still a work in progress!</em></p>

<p><p><img src="../assets/6uzRMGh.jpg" alt="6uzRMGh.jpg#asset:247" style="vertical-align:middle;height:auto;" /></p>
<h3>How it works</h3>
<p>Let's take this shot for example:</p>
<p><img src="../../i.imgur.com/zHALbLK.jpg" alt="zHALbLK.jpg" style="vertical-align:middle;height:auto;" /></p>
<p>All character meshes, the weapon meshes and the icons are rendered to the custom depth and stencil buffers:</p>
<p><img src="../../i.imgur.com/yn8WfHM.png" alt="yn8WfHM.png" style="vertical-align:middle;height:auto;" /></p>
<p>At the moment, the stencil values are a hardcoded "enum" value, but this will most likely change to a bit mask.</p>
<p>Next the pre-tonemap shader is applied, coloring the areas defined by the stencil values:</p>
<p><img src="../../i.imgur.com/F5jHWfU.jpg" alt="F5jHWfU.jpg" style="vertical-align:middle;height:auto;" /></p>
<p>Then the post-tonemap shader is applied to the screen, except for the stencil values:</p>
<p><img src="../../i.imgur.com/mNk0PA0.png" alt="mNk0PA0.png" style="vertical-align:middle;height:auto;" /></p>
<p>(The screenshot above is without the pre-tonemap shader applied).</p>
<p>The combined result:</p>
<p><img src="../../i.imgur.com/E4WrEgg.png" alt="E4WrEgg.png" style="vertical-align:middle;height:auto;" /></p>
<p>At the moment the shaders identify the objects by a number of if-statements, this will soon be optimized by making the stencil values a bitmask.</p>
<p>The pre-tonemap shader fills a color on an area marked with specific stencil values (first desaturates it to prevent lighting influence), and then applies a Fresnel on top of that (where every one of the colored squares is a section for one specific object):</p>
<p><img src="../../i.imgur.com/4nFSDCn.png" alt="4nFSDCn.png" style="vertical-align:middle;height:auto;" /></p>
<p>The post-tonemap shader first determines if the stencil value is targeted to an object, if not it desaturates the fragment - applies a blur and blends color based on the scene depth as well as different blend colors. It looks like this:</p>
<p><img src="../../i.imgur.com/tfcrX6R.png" alt="tfcrX6R.png" style="vertical-align:middle;height:auto;" /></p></p>

	    	    	        		    	    	

                    
                    		            	</div>	
		            				
				</div>
			</div>
		</div>
	</div>
	<!-- End of PROJECT DESCRIPTION -->
</div>

				<div id="footer" class="section--small section" style="background-color: #525252">
					<div class="section-content" style="text-align: center; padding-top: 10px; padding-bottom: 10px; margin-top: 40px;">
						<span class="text">Copyright © 2021 by Hugo Peters | All images, logos and names are used with permission</span>
											</div>
				</div>
			
					</div>
  	</div>

  		  	<!-- MENU BAR -->
		<div id="menubar-container">
			<!-- MENU BAR BG -->
			<div id="menubar-bg"></div>
			<!-- End of MENU BAR BG -->

			<!-- MENU BAR CONTENT -->
			<div class="container-fluid">
				<div class="row-fluid">
					<!-- MENU BAR TITLE -->
					<div class="col-xs-8 col-sm-4 col-md-3 col-lg-3 col-xl-2">
						<div id="menubar-title" class="noselect">
							<span>Hugo Peters</span>
						</div>
					</div>
					<!-- End of MENU BAR TITLE -->

					<!-- MENU BAR ITEMS -->
					<div class="col-sm-6 col-md-9 col-lg-9 col-xl-10">
						<div id="menubar-items-container">
							<div class="menubar-item" data-target-element="#about">
								<div class="noselect menubar-item-text">
									<span><i class="fa fa-lightbulb-o" aria-hidden="true"></i>   ABOUT</span>
								</div>
							</div>
							<div class="menubar-item" data-target-element="#professional-projects">
								<div class="noselect menubar-item-text">
									<span><i class="fa fa-users" aria-hidden="true"></i>   PROFESSIONAL PROJECTS</span>
								</div>
							</div>
							<div class="menubar-item" data-target-element="#personal-work">
								<div class="noselect menubar-item-text">
									<span><i class="fa fa-heart" aria-hidden="true"></i>   PERSONAL WORK</span>
								</div>
							</div>
								<a href="../HugoPetersCV.pdf" onclick="trackResume();return true;" style="border: none; text-decoration: none;" target="_blank" class="menubar-item">
									<span class="noselect menubar-item-text"><i class="fa fa-file-text" aria-hidden="true"></i>   RÉSUMÉ</span>
								</a>
							</a>
							<div class="menubar-item" data-target-element="#contact">
								<div class="noselect menubar-item-text">
									<span><i class="fa fa-comments" aria-hidden="true"></i>   CONTACT</span>
								</div>
							</div>
							<div class="twitter-follow-button-wrap" style="display: inline-block; margin-top: 13px; margin-left: 5px; position: absolute;">
								<a href="https://twitter.com/HugoPeters96?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow Me</a><script async src="../../platform.twitter.com/widgets.js" charset="utf-8"></script>
							</div>
						</div>
					</div>
					<!-- End of MENU BAR ITEMS -->

					<!-- MENU BAR HAMBURGER -->
					<div class="col-xs-4 col-sm-2">
						<div id="menubar-hamburger-icon" class="hamburger hamburger--spin" style="color: white;">
						  <div class="hamburger-box">
							<div class="hamburger-inner"></div>
						  </div>
						</div>
					</div>				
					<!-- End of MENU BAR HAMBURGER -->
				</div>
			</div>
			<!-- End of MENU BAR CONTENT -->
		  </div>
		<!-- End of MENU BAR -->
	  
		<!-- HAMBURGER MENU -->
		<div id="hamburger-menu">
			<div id="hamburger-menu-list-container">
				<ul id="hamburger-menu-list">
					<li class="noselect hamburger-menu-item" data-target-element="#about"><div class="hamburger-menu-item-icon"><i class="fa fa-lightbulb-o" aria-hidden="true"></i></div><span class="hamburger-menu-item-text">ABOUT</span></li>
					<li class="noselect hamburger-menu-item" data-target-element="#professional-projects"><div class="hamburger-menu-item-icon"><i class="fa fa-users" aria-hidden="true"></i></div><span class="hamburger-menu-item-text">PROFESSIONAL PROJECTS</span></li>
					<li class="noselect hamburger-menu-item" data-target-element="#personal-work"><div class="hamburger-menu-item-icon"><i class="fa fa-heart" aria-hidden="true"></i></div><span class="hamburger-menu-item-text">PERSONAL WORK</span></li>
					<a href="../HugoPetersCV.pdf" style="border: none; text-decoration: none;" target="_blank">
						<li class="noselect hamburger-menu-item"><div class="hamburger-menu-item-icon"><i class="fa fa-file-text" aria-hidden="true"></i></div><span class="hamburger-menu-item-text">RÉSUMÉ</span></li>
					</a>
					<li class="noselect hamburger-menu-item" data-target-element="#contact"><div class="hamburger-menu-item-icon"><i class="fa fa-comments" aria-hidden="true"></i></div><span class="hamburger-menu-item-text">CONTACT</span></li>
				</ul>
			</div>
		</div>
		<!-- End of HAMBURGER MENU -->

		<!-- SOCIAL -> Page Cover -->
		<div id="social-pagecover-container">
			<!-- social-pagecover will be placed here dynamically -->
		</div>
		<!-- End of SOCIAL -> Page Cover -->
		
  <script type="text/javascript" src="../js/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.js"></script>
<script type="text/javascript" src="../js/velocity.min.js"></script>
<script type="text/javascript" src="../js/velocity.ui.min.js"></script>
<script type="text/javascript" src="../js/jquery.vide.min.js"></script>
<script type="text/javascript" src="../js/help.parsecolor.js"></script>
<script type="text/javascript" src="../js/jquery.fullpage.min.html"></script>
<script type="text/javascript" src="../js/flickity.pkgd.min.js"></script>
<script type="text/javascript" src="../js/lity.min.js"></script>
<script type="text/javascript" src="../js/syntaxhighlighter/shCore.js"></script>
<script type="text/javascript" src="../js/syntaxhighlighter/shBrushCpp.js"></script>
<script type="text/javascript" src="../js/jquery.backstretch.min.js"></script>
<script type="text/javascript" src="../js/photoswipe.min.js"></script>
<script type="text/javascript" src="../js/photoswipe-ui-default.min.js"></script>
<script type="text/javascript" src="../js/plyr.js"></script>
<script type="text/javascript" src="../js/common.js"></script></body>

<!-- Mirrored from hugo.fyi/projects/bolt-storm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Aug 2021 04:18:34 GMT -->
</html>


























